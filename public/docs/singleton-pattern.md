# **Singleton Pattern**‚ôªÔ∏è | [singleton –∑ –∫–æ–¥–æ–º](../../src/patterns/api/api-proxy.ts)

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º–∏ üìù

–£ –±–∞–≥–∞—Ç—å–æ—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∞—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –º–∞—Ç–∏ —î–¥–∏–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –ø–µ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É –∞–±–æ –∫–ª—ñ—î–Ω—Ç–∞ –¥–ª—è
—Å–ø—ñ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, API-–∫–ª—ñ—î–Ω—Ç). –í–∞–∂–ª–∏–≤–æ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏, —â–æ –ª–∏—à–µ –æ–¥–∏–Ω
–µ–∫–∑–µ–º–ø–ª—è—Ä –∫–ª—ñ—î–Ω—Ç–∞ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º —É—Å—å–æ–≥–æ –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É –ø—Ä–æ–≥—Ä–∞–º–∏.

## –ü—Ä–∏—á–∏–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—É Singleton ü§î

Singleton –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–ª–∞—Å –º–∞—î –ª–∏—à–µ –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä, —ñ –∑–∞–±–µ–∑–ø–µ—á—É—î –≥–ª–æ–±–∞–ª—å–Ω—É —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø—É
–¥–æ –Ω—å–æ–≥–æ (—Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≥–ª–æ–±–∞–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º).

## –ü–µ—Ä–µ–≤–∞–≥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ‚úÖ

- **–û–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä**: –µ–∫–æ–Ω–æ–º—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- **–ì–ª–æ–±–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø**: —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- **–Ü–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è**: –∫–ª—ñ—î–Ω—Ç–∏ –Ω–µ —Å—Ç–≤–æ—Ä—é—é—Ç—å –æ–±'—î–∫—Ç–∏ –Ω–∞–ø—Ä—è–º—É

## –ù–µ–¥–æ–ª—ñ–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ‚ö†Ô∏è

- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –≤–∞–∂—á–µ –ø—ñ–¥–º—ñ–Ω—è—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- **–°–ª–∞–±–∫–∞ —Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω—ñ—Å—Ç—å**: –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
- –£ –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –ø–æ—Ä—É—à–µ–Ω–Ω—è —ñ–Ω–≤–µ—Ä—Å—ñ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

## –û–ø–∏—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó üîß

–ö–ª–∞—Å `ApiSingleton` –º–∞—î –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –∑–∞ `Symbol`, —ñ –±–ª–æ–∫—É—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
–æ–±‚Äô—î–∫—Ç—ñ–≤ –Ω–∞–ø—Ä—è–º—É. –ú–µ—Ç–æ–¥ `getInstance` –ø–æ–≤–µ—Ä—Ç–∞—î –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—á–∏ –π–æ–≥–æ –ª–∏—à–µ
–æ–¥–∏–Ω —Ä–∞–∑. –í—Å—è –ª–æ–≥—ñ–∫–∞ –¥–µ–ª–µ–≥—É—î—Ç—å—Å—è `ApiProxy` –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è.

## –ö–æ–¥–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è üíª

```ts
export class ApiSingleton implements HttpClient {
  private static instance: ApiSingleton | null = null

  private constructor(token: symbol, baseURL?: string) {
    if (token !== PRIVATE_CONSTRUCTOR) {
      throw new Error('Use getInstance() instead of new operator')
    }

    this.adapter = new NodebookApiAdapter(baseURL)
    this.proxy = new ApiProxy(this.adapter)
  }

  public static getInstance(baseURL?: string): ApiSingleton {
    if (!ApiSingleton.instance) {
      ApiSingleton.instance = new ApiSingleton(PRIVATE_CONSTRUCTOR, baseURL)
    }
    return ApiSingleton.instance
  }
}
```
